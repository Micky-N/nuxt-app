import{z as A,v as B,C as p,R as I,D as N,L as P,A as i,f as l,H as e,w as s,E as T,e as c,g as o,I as V,h as u,S as E,U as q,V as z,G as d,t as f,M as H,K as M,W as R,X as j}from"#entry";import{_ as L,a as X}from"./JK7XUX7X.js";import{_ as G}from"./ep3SN8fP.js";import{_ as K,a as W}from"./B5HEZOn7.js";import{u as g}from"./G6eciOsY.js";import{q as F,a as J}from"./3rR8LesE.js";import"./D9wA68HG.js";import"./iik6CYzq.js";const O={class:"text-muted"},Q={class:"flex flex-wrap items-center gap-3 mt-4"},lt=A({__name:"[slug]",async setup(Y){let a,n;const r=B(),{data:t}=([a,n]=p(()=>g(r.path,()=>F("posts").path(r.path).first(),"$-EmEa3i_tX")),a=await a,n(),a);if(!t.value)throw I({statusCode:404,statusMessage:"Post not found",fatal:!0});const{data:m}=([a,n]=p(()=>g(`${r.path}-surround`,()=>J("posts",r.path,{fields:["description"]}))),a=await a,n(),a);return N({title:t.value.title,description:t.value.seo.description,keywords:t.value.seo.keywords,author:t.value.author.name,ogTitle:t.value.title,ogDescription:t.value.seo.description,ogImage:t.value.image.src,ogType:"article",ogUrl:t.value.seo.url,twitterCard:t.value.seo.card,twitterTitle:t.value.title,twitterDescription:t.value.seo.description,twitterImage:t.value.image.src}),P({htmlAttrs:{lang:t.value?.seo.lang||"fr"},link:[{rel:"canonical",href:t.value.seo.url}]}),(Z,_)=>{const v=V,h=H,y=z,w=E,k=L,C=G,$=j,U=K,b=X,x=W,S=M,D=T;return e(t)?(c(),i(D,{key:0},{default:s(()=>[e(t).image?.src?(c(),i(v,{key:0,src:e(t).image.src,class:"w-full aspect-video object-cover object-center rounded-lg mt-4",format:"webp"},null,8,["src"])):l("",!0),o(k,{title:e(t).title,description:e(t).description},{headline:s(()=>[o(h,d(e(t).badge,{variant:"subtle"}),null,16),_[0]||(_[0]=u("span",{class:"text-muted"},"Â·",-1)),u("time",O,f(new Date(e(t).date).toLocaleDateString("en",{year:"numeric",month:"short",day:"numeric"})),1)]),default:s(()=>[u("div",Q,[o(w,{to:e(t).author.to,color:"neutral",variant:"subtle",target:"_blank",size:"sm"},{default:s(()=>[o(y,d(e(t).author.avatar,{alt:"Author avatar",size:"sm"}),null,16),q(" "+f(e(t).author.name),1)]),_:1},8,["to"])])]),_:1},8,["title","description"]),o(S,null,R({default:s(()=>[o(b,null,{default:s(()=>[e(t)?(c(),i(C,{key:0,value:e(t)},null,8,["value"])):l("",!0),e(m)?.length?(c(),i($,{key:1})):l("",!0),o(U,{surround:e(m)},null,8,["surround"])]),_:1})]),_:2},[e(t)?.body?.toc?.links?.length?{name:"right",fn:s(()=>[o(x,{links:e(t).body.toc.links},null,8,["links"])]),key:"0"}:void 0]),1024)]),_:1})):l("",!0)}}});export{lt as default};
